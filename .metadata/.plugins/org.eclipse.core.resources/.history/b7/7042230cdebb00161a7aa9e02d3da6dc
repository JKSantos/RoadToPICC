<%@ taglib uri="/struts-tags" prefix="s" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<div class="wrapper" ng-controller="reservationTable as vm">
    <div class="main z-depth-barts" style="margin-left: 20px; margin-right: 20px;">
        <div class="col s12" style="margin-left: 20px; margin-right: 20px;">
            <h3 class="grey-text text-darken-1">Reservation</h3>
            <a class="crReservation z-depth-1 hoverable waves-effect waves-light modal-trigger btn purple darken-2 left white-text"
               href="#createReservationModal" style="margin-top: 30px; margin-left: 15px;"><i
                    class="material-icons">add</i></a>
            <!--<a class="z-depth-1 hoverable waves-effect waves-light modal-trigger btn purple darken-2 left white-text"-->
               <!--href="#reservationModal" style="margin-top: 30px; margin-left: 15px;"><i-->
                    <!--class="material-icons">archive</i></a>-->
             <a class="z-depth-1 hoverable waves-effect waves-light modal-trigger btn purple darken-2 left white-text"
               href="#reservationListModal" style="margin-top: 30px; margin-left: 15px;"><i
                    class="material-icons">list</i></a>
            <nav class="right white hoverable  z-depth-1" style="width: 300px; margin-right: 20px;">
                <div class="nav-wrapper col s4">
                    <form>
                        <div class="input-field">
                            <input id="reservationSearch" placeholder="Search" class="grey-text text-darken-4"
                                   type="search"
                                   ng-model="reservationSearch">
                            <label for="reservationSearch"><i
                                    class="material-icons grey-text text-darken-4">search</i></label>
                        </div>
                    </form>
                </div>
            </nav>
            <div class="row"></div>
            <div>
            	<div id="reservationCalendar"></div>
            </div>


            
        </div>
    </div>
    
    <div id="viewDetails" class="modal modal-fixed-footer">
        <div class="modal-content">
            <h4 class="grey-text center text-darken-1">Reservation Details</h4>
           <h5 class="purple-text">Products</h5>
            <ul ng-repeat="products in vm.customerContainsProduct">
                <li>
                  <h5 ng-bind="products.product.strProductName"></h5>
                </li>
            </ul>
            <h5 class="purple-text">Services</h5>
            <ul ng-repeat="services in  vm.customerContainsService">
                <li>
                  <h6> {{services.service.strServiceName}}</h6>
                </li>
            </ul>
            <h5 class="purple-text">Packages</h5>
            <ul ng-repeat="packages in  vm.customerContainsPackage">
                <li>
                  <h6> {{packages.packages.strPackageName}}</h6>
                </li>
            </ul>
            <h5 class="purple-text">Promos</h5>
            <ul ng-repeat="promos in vm.customerContainsPromo">
                <li>
                  <h6> {{promos.promo.strPromoName}}</h6>
                </li>
            </ul> 
           
            <div class="container">
                <div class="row">

                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="red-text btn-flat transparent left" disabled
                    style="margin:0px !important; padding:0px !important;"><i
                    class="material-icons">error_outline</i>&nbspRequired field
            </button>
            <button type="submit" value="Submit" id="paymentDetails.submit"
                    class="waves-effect waves-light white-text btn-flat purple"
                    style="margin-left:3px; margin-right:3px;"
                    ng-click="">DONE
            </button>
        </div>
    </div>
    

    <!-- Modal Structure -->
    <div id="reservationListModal" class="modal" style = "width: 70% !important; height: 80% !important; margin-top: -10px !important; border-radius: 10px;">
        <div class="modal-content">
         	<a href="#!" class=" modal-action modal-close waves-effect waves-purple btn-flat right"><i
                    class="material-icons red-text" style="font-size: 30px ">highlight_off</i></a>
            <h3 class="purple-text text-darken-3 thin">Reservation List</h3>
            <table id="reservationTable"
                   datatable="ng"
                   class="hoverable z-depth-1 cell-border row-border display responsive-table highlight" width="100%"
                   style="border: 1px solid #bdbdbd; margin-top: -30px !important;" rowspan="10">
                <thead>
                <tr>
                    <th class="left-align">Customer Name</th>
                    <th class="left-align">Customer Type</th>
                    <th class="left-align">Reservation Type</th>
                    <th class="left-align">Venue</th>
                    <th class="right-align">Reservation Date</th>
                    <th class="left-align">Status</th>
                    <th align="center-align">Action</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="customer in vm.customerList"
                    ng-if="customer.strStatus == 'PENDING' || customer.strStatus == 'REQUEST'">
                    <td class="left-align" style="padding: 0px !important; margin-left: 5px !important;">{{customer.customer.strName}}</td>
                    <td class="left-align" ng-if="customer.intReservationType == 1">INDIVIDUAL</td>
                    <td class="left-align" ng-if="customer.intReservationType == 2">{{customer.customer.strCustomerType | uppercase}}</td>
                    <td class="left-align" ng-if="customer.intReservationType == 1">HOME SERVICE</td>
                    <td class="left-align" ng-if="customer.intReservationType == 2">EVENT</td>
                    <td class="left-align">{{customer.strVenue}}</td>
                    <td class="right-align">{{customer.datFrom | date: "MMMM/d/yyyy" }}</td>
                    <td class="left-align">{{customer.strStatus}}</td>
                    <td align="center-align">
                        <button class="waves-effect waves-purple btn-flat transparent red-text text-darken-4"
                                style="padding-left: 10px;padding-right:10px; margin: 5px;" title="Cancel"
                                ng-if="customer.intReservationType == 1 && customer.strStatus=='PENDING'"
                                ng-click="cancelReservation(customer, $index)">
                            <i class='material-icons'>clear</i>
                        </button>
                        <button class="waves-effect waves-purple btn-flat transparent grey-text text-darken-4"
                                style="padding-left: 10px;padding-right:10px; margin: 5px;" title="Accept"
                                ng-if="customer.intReservationType == 1 && customer.strStatus=='REQUEST'"
                                ng-click="acceptReservation(customer, $index)">
                            <i class='material-icons'>done</i>
                        </button>
                        <button class="middle-align waves-effect waves-purple btn-flat transparent red-text text-darken-4"
                                style="padding-left: 10px;padding-right:10px; margin: 5px;" title="Reject"
                                ng-if="customer.intReservationType == 1 && customer.strStatus=='REQUEST'"
                                ng-click="rejectReservation(customer, $index);">
                            <i class='material-icons'>clear</i>
                        </button>
                        <button class="waves-effect waves-purple btn-flat transparent grey-text text-darken-4"
                                style="padding-left: 10px;padding-right:10px; margin: 5px;" title="Accept"
                                ng-if="customer.intReservationType == 2 && customer.strStatus=='REQUEST'"
                                ng-click="acceptReservation(customer, $index)">
                            <i class='material-icons'>done</i>
                        </button>
                        <button class="middle-align waves-effect waves-purple btn-flat transparent red-text text-darken-4"
                                style="padding-left: 10px;padding-right:10px; margin: 5px;" title="Cancel"
                                ng-if="customer.intReservationType == 2 && customer.strStatus=='PENDING'"
                                ng-click="cancelReservation(customer, $index);">
                            <i class='material-icons'>clear</i>
                        </button>
                        <button class="waves-effect waves-purple btn-flat transparent red-text text-darken-4"
                                style="padding-left: 10px;padding-right:10px; margin: 5px;" title="Reject"
                                ng-if="customer.intReservationType == 2 && customer.strStatus=='REQUEST'"
                                ng-click="rejectReservation(customer, $index)">
                            <i class='material-icons'>clear</i>
                        </button>
                    </td>
                </tr>
                </tbody>
                <tfoot style="border: 1px solid #bdbdbd;">
                <tr>
                    <th class="left-align">Customer Name</th>
                    <th class="left-align">Customer Type</th>
                    <th class="left-align">Reservation Type</th>
                    <th class="left-align">Venue</th>
                    <th class="right-align">Reservation Date</th>
                    <th class="left-align">Status</th>
                    <th align="center-align">Action</th>
                </tr>
                </tfoot>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Modal Structure -->
    <div id="createReservationModal" class="modal modal-fixed-footer"
         style="width: 70% !important; height: 90% !important; max-height: 100% !important; margin-top: -40px;">
        <form class="col s12 css-form" name="createReservationForm" id="createReservationForm" novalidate>
            <div class="modal-content">
                <!-- <div class="container"> -->
                <div class="wrapper">
                    <h4 class="center grey-text text-darken-1">Create Reservation
                        <a id="btnCrExtraExit" type="reset" value="Reset" class="modal-action modal-close">
                            <i class="small material-icons right grey-text text-darken-4">close</i>
                        </a>
                    </h4>
                    <div class="progress">
                        <div class="determinate center active purple darken-4 white-text" role="progressbar"
                             aria-valuemin="0"
                             aria-valuemax="100" style="color: white;">
                        </div>
                    </div>
                    <div class="reservationerrorcontainer card red center input-field col s12 white-text z-depth-barts">
                        <span class="white-text"
                              ng-show="createReservationForm.crRCustName.$error.minlength">
                            Customer name must be at least 5 characters <br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crRCustName.$error.pattern">
                            Customer name is invalid<br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crRCustName.$touched && createReservationForm.crRCustName.$invalid">
                            Customer name is required<br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crRAddress.$error.minlength">
                            Address must be at least 8 characters <br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crRContact.$error.minlength">
                            11 digits is required for contact number<br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crRContact.$error.pattern">
                            Invalid contact number<br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crRContact.$touched && createReservationForm.crRContact.$invalid">
                            Contact number is required<br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crRCompanyName.$touched && createReservationForm.crRCompanyName.$invalid">
                            Company is required<br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crRAddress.$touched && createReservationForm.crRAddress.$invalid">
                            Address is required<br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crRAddress.$error.pattern">
                            Invalid address<br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crRAddress.$error.minlength">
                            Address ust be at least 8 characters<br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crREventVenue.$error.minlength">
                            Event Venue be at least 8 characters<br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crREventVenue.$error.pattern">
                            Invalid event venue<br>
                        </span>
                        <span class="white-text"
                              ng-show="createReservationForm.crREventVenue.$touched && createReservationForm.crREventVenue.$invalid">
                            Event venue is required<br>
                        </span>

                    </div>
                    <div class="stepreservation well" style="margin-top: -5px;">
                        <div class="container">
                        <h5><b>Customer Details</b></h5>
                            <div class="row">
                                <div class="input-field col s6">
                                    <select id="rType"
                                            material-select watch
                                            ng-model="vm.details.reservationType"
                                            ng-change="changeService(); changePackage(); changePromo();"
                                            ng-options="type as type.type for type in vm.reservationType">
                                    </select>
                                    <label for="rType">
                                        <b>Reservation Type</b>
                                        <i class="material-icons red-text tiny">error_outline</i>
                                    </label>
                                </div>
                                <div class="input-field col s6"
                                     ng-if="vm.details.reservationType.id == 2">
                                    <label style="margin-top: -25px;"><b>Customer Type</b>
                                        <i class="material-icons red-text tiny">error_outline</i>
                                    </label>
                                    <input type="radio" name="ctype" id="crRCustType1" ng-model="vm.individual"
                                           value="Individual" ng-required="!vm.individual">
                                    <label for="crRCustType1">Individual</label>
                                    <input type="radio" name="ctype" id="crRCustType2" ng-model="vm.individual"
                                           value="Company" ng-required="!vm.individual">
                                    <label for="crRCustType2">Company</label>
                                </div>
                                <div class="input-field col s12">
                                    <div class="input-field col s12">
                                        <input type="text" id="crRCustName" name="crRCustName"
                                               ng-pattern="/^[A-Za-z \-'`]+$/"
                                               ng-minlength="5"
                                               required
                                               ng-model="vm.details.name" placeholder="Customer Name"/>
                                        <label for="crRCustName" class="active"><b>Customer Name</b>
                                            <i class="material-icons red-text tiny">error_outline</i>
                                        </label>
                                    </div>
                                    <div class="input-field col s6"
                                         ng-if="vm.details.reservationType.id == 2 && vm.individual == 'Company'">
                                        <input type="text" name="crRCompanyName"
                                               id="crRCompanyName" ng-model="vm.details.company"
                                               ng-minlength="5"
                                               ng-required="true"
                                               ng-pattern="/^[A-Za-z \-'`]+$/"
                                               placeholder="Company Name"
                                               ng-disabled="vm.individual == 'Individual'">
                                        <label for="crRCompanyName" class="active"><b>Company Name</b>
                                            <i class="material-icons red-text tiny">error_outline</i>
                                        </label>
                                    </div>
                                </div>
                                <div class="input-field col s12" style="margin-top: 15px;">
                                    <input type="text" id="crRAddress" ng-model="vm.details.address"
                                           name="crRAddress"
                                           ng-minlength="8"
                                           ng-required="true"
                                           ng-pattern="/^[A-Za-z0-9. #,\-'`]+$/"
                                           placeholder="Address"/>
                                    <label for="crRAddress" class="active"><b>Address</b>
                                        <i class="material-icons red-text tiny">error_outline</i>
                                    </label>
                                </div>
                                <div class="input-field col s6">
                                    <input type="number" id="crRContact" ng-model="vm.details.contact"
                                           name="crRContact"
                                           ng-required="true"
                                           ng-minlength="11"
                                           ng-pattern="/^\d{11}$/"
                                           placeholder="Contact Number"/>
                                    <label for="crRContact" class="active"><b>Contact Number</b>
                                        <i class="material-icons red-text tiny">error_outline</i>
                                    </label>
                                </div>
                                <div class="input-field col s6" style="margin-top: 15px;">
                                    <input type="email" ng-model="vm.details.email" id="crREmail" placeholder="Email"/>
                                    <label for="crREmail" class="active"><b>Email</b>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="stepreservation well">
                        <div class="container">
                            <div class="row">
                                <h5><b>Reservation Details</b></h5>
                                <div class="input-field col s6"
                                     ng-if="vm.details.reservationType.id == 2">
                                    <input type="text" class="validate" id="crREventVenue" name="crREventVenue"
                                           ng-model="vm.details.venue" placeholder="Event Venue"/>
                                    <label for="crREventVenue" class="active"><b>Event Venue</b>
                                        <i class="material-icons red-text tiny">error_outline</i>
                                    </label>
                                </div>
                                <div class="input-field col s6"
                                     ng-if="vm.details.reservationType.id == 2">
                                    <select ng-model="vm.details.location" material-select watch name="crREventLocation" id="crREventLocation">
                                        <option value="" disabled selected>Choose...</option>
                                        <option ng-repeat="loc in vm.locationList" value="{{loc.intLocationID}}">{{loc.strBarangay}}, {{loc.strCity}}</option>
                                    </select>
                                    <label for="crREventVenue"><b>Location</b>
                                        <i class="material-icons red-text tiny">error_outline</i>
                                    </label>
                                </div>
                                <div class="input-field col s6">
                                    <input input-date
                                           type="text"
                                           id="ngDateFrom"
                                           placeholder="January/1/2016"
                                           ng-model="vm.details.datFrom"
                                           months-full="{{ vm.month }}"
                                           disable="disable"
                                           min="{{ vm.minDate }}"
                                           max="{{ vm.maxDate }}"
                                           today="today"
                                           clear="clear"
                                           close="close"
                                           select-years="15"
                                           ng-change="vm.changeDatFrom(vm.details.datFrom); vm.getAvailableEmployeeHomeService(vm.details.datFrom, vm.details.timeFrom, vm.details.timeTo)"/>
                                    <label for="ngDateFrom" class="active"><b>Date From</b><i
                                            class="material-icons red-text tiny">error_outline</i></label>
                                </div>
                                <!--<div class="input-field col s6" ng-show="vm.details.reservationType.id == 2">-->
                                    <!--<input input-date-->
                                           <!--type="text"-->
                                           <!--placeholder="January/1/2016"-->
                                           <!--id="ngDateTo"-->
                                           <!--ng-model="vm.details.datTo"-->
                                           <!--months-full="{{ vm.month }}"-->
                                           <!--months-short="{{ vm.monthShort }}"-->
                                           <!--weekdays-full="{{ vm.weekdaysFull }}"-->
                                           <!--weekdays-short="{{ vm.weekdaysShort }}"-->
                                           <!--weekdays-letter="{{ vm.weekdaysLetter }}"-->
                                           <!--disable="disable"-->
                                           <!--min="{{vm.details.datFrom}}"-->
                                           <!--max="{{ vm.maxDate }}"-->
                                           <!--today="today"-->
                                           <!--clear="clear"-->
                                           <!--close="close"-->
                                           <!--select-years="15"-->
                                           <!--ng-change="vm.changeDatTo(vm.details.datTo)"/>-->
                                    <!--<label for="ngDateTo" class="active">-->
                                        <!--<b>Date To</b>-->
                                        <!--<i class="material-icons red-text tiny">-->
                                            <!--error_outline</i>-->
                                    <!--</label>-->
                                <!--</div>-->
                                <div class="input-field col s6">
                                    <input id="reserveTimeFrom"
                                           class="timepicker"
                                           type="time"
                                           ng-model="vm.details.timeFrom"
                                           placeholder="12:00AM"
                                           ng-change = "vm.getAvailableEmployeeHomeService(vm.details.datFrom, vm.details.timeFrom, vm.details.timeTo)">
                                    <label for="reserveTimeFrom">
                                        <b>From (Time)</b>
                                        <i class="material-icons red-text tiny">
                                            error_outline
                                        </i>
                                    </label>
                                </div>
                                <div class="input-field col s6">
                                    <input type="number" ng-model="vm.details.headCount" id="crRHeadCount"
                                           placeholder="Headcount"/>
                                    <label for="crRHeadCount"><b>Head Count</b><i
                                            class="material-icons red-text tiny">error_outline</i></label>
                                </div>
                                <div class="input-field col s6" ng-show="vm.details.reservationType.id == 2">
                                    <input id="reserveTimeTo"
                                           class="timepicker"
                                           type="time"
                                           ng-model="vm.details.timeTo"
                                           placeholder="12:00AM"
                                           ng-change="vm.getAvailableEmployeeHomeService(vm.details.datFrom, vm.details.timeFrom, vm.details.timeTo)">
                                    <label for="reserveTimeTo" class="active">
                                        <b>To (Time)</b>
                                        <i class="material-icons red-text tiny">
                                            error_outline
                                        </i>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="stepreservation well">
                        <div class="row">
                            <div class="col s4">
                                <select name="" id="discountFilter" ng-model="vm.selected">
                                    <option value="product" selected>Product</option>
                                    <option value="service">Service</option>
                                    <option value="package">Package</option>
                                    <option value="promo">Promo</option>
                                </select>
                                <label for="discountFilter"><b>Select</b></label>
                            </div>
                            <nav class="right white z-depth-1" style="width: 300px; margin-right: 20px;">
                                <div class="nav-wrapper col s12">
                                    <form>
                                        <div class="input-field">
                                            <input id="crDiscountSearch" placeholder="Search"
                                                   class="grey-text text-darken-4"
                                                   type="search" style="border: none !important;"
                                                   ng-model="searchReservationItem">
                                            <label for="crDiscountSearch"><i
                                                    class="material-icons grey-text text-darken-4">search</i></label>
                                        </div>
                                    </form>
                                </div>
                            </nav>

                            <div class="row col s12">

                            </div>

                            <div ng-show="vm.selected == 'product'">
                                <div class="row ">
                                    <div class="col s2" ng-repeat="product in vm.productList | filter: searchReservationItem">
                                        <div class="card small">
                                            <div class="card-image waves-effect waves-block waves-light">
                                                <img class="activator" ng-src="{{product.strPhotoPath}}">
                                            </div>
                                            <div class="card-content">
                                                <a class="activator grey-text text-darken-4 light btn btn-small center"
                                                   style="margin-top: -10px;"><i
                                                        class="material-icons right white-text">add_shopping_cart</i></a>
                                                <h5 style='font-size: 12px; line-height: 10px !important;'><b>{{product.strProductName}}</b>
                                                    <p>{{product.dblProductPrice | currency:"P"}}</p></h5>
                                            </div>
                                            <div class="card-reveal">

                                    <span class="card-title grey-text text-darken-4"><i
                                            class="material-icons right" id="prodClose{{product.intProductID}}">close</i></span>
                                                <h4 style='font-size: 12px; line-height: 15px !important;'>
                                                    <b>{{product.strProductName}}</b><br/>
                                                    <span class="grey-text text-darken-4">{{product.dblProductPrice | currency:"Php "}}</span>
                                                </h4>
                                                <div class="input-field col s12">
                                                    <input type="number" id="crPSQty{{product.intProductID}}"
                                                           ng-model="vm.quantity"/>
                                                    <label for="crPSQty{{product.intProductID}}"><b>Quantity</b></label>
                                                </div>
                                                <h6 class="grey-text text-darken-4">{{product.dblProductPrice * vm.quantity | currency: "Php "}}</h6>

                                                <a class="waves-effect waves-light btn"
                                                   ng-if="vm.quantity <= product.intProductQuantity"
                                                   ng-click="vm.addToCart($index, vm.selected); vm.sumTotal(); vm.closeCard(product.intProductID);">
                                                    <i class="material-icons left"
                                                       style="padding: 0px !important; margin: 0px !important;">
                                                        shopping_basket
                                                    </i>BUY NOW!
                                                </a>
                                                <a class="btn transparent z-depth-0"
                                                   ng-if="vm.quantity > product.intProductQuantity"
                                                   ng-disabled="true"
                                                   style="opacity: 1; cursor: not-allowed !important;">
                                                    <span class="red-text center">Not enough stock</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div ng-show="vm.selected == 'service'">
                                <div class="row ">
                                    <div class="col s2" ng-repeat="service in vm.serviceList | filter: searchReservationItem ">
                                        <div class="card small">
                                            <div class="card-image waves-effect waves-block waves-light">
                                                <img class="activator" ng-src="{{service.strPhotoPath}}">
                                            </div>
                                            <div class="card-content">
                                                <a class="activator grey-text text-darken-4 light btn btn-small center"
                                                   style="margin-top: -10px;"><i
                                                        class="material-icons right white-text">add_shopping_cart</i></a>
                                                <h5 style='font-size: 12px; line-height: 10px !important;'><b>{{service.strServiceName}}</b>
                                                    <p>{{service.dblServicePrice | currency:"P"}}</p></h5>
                                            </div>
                                            <div class="card-reveal">

                                    <span class="card-title grey-text text-darken-4"><i
                                            class="material-icons right" id="servClose{{service.intServiceID}}">close</i></span>
                                                <h4 style='font-size: 12px; line-height: 15px !important;'>
                                                    <b>{{service.strServiceName}}</b><br/>
                                                    <span class="grey-text text-darken-4">{{service.dblServicePrice | currency:"Php "}}</span>
                                                </h4>
                                                <div class="input-field col s12">
                                                    <input type="number" id="crPSQty{{service.intServiceID}}"
                                                           ng-model="vm.quantity"/>
                                                    <label for="crPSQty{{service.intServiceID}}"><b>Quantity</b></label>
                                                </div>
                                                <h6 class="grey-text text-darken-4">{{service.dblServicePrice * vm.quantity | currency: "Php "}}</h6>

                                                <a class="waves-effect waves-light btn"
                                                   ng-click="vm.addToCart($index, vm.selected); vm.sumTotal(); vm.closeService(service.intServiceID);">
                                                    <i class="material-icons left"
                                                       style="padding: 0px !important; margin: 0px !important;">
                                                        shopping_basket</i>GET SERVICE
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div ng-show="vm.selected == 'package'">
                                <div class="row ">
                                    <div class="col s2" ng-repeat="package in vm.packageList | filter: searchReservationItem"
                                                        ng-if="package.intPackageStatus > 0">
                                        <div class="card small">
                                            <div class="card-image waves-effect waves-block waves-light">
                                                <img class="activator" ng-src="{{service.strPhotoPath}}">
                                            </div>
                                            <div class="card-content">
                                                <a class="activator grey-text text-darken-4 light btn btn-small center"
                                                   style="margin-top: -10px;"><i
                                                        class="material-icons right white-text">add_shopping_cart</i></a>
                                                <h5 style='font-size: 12px; line-height: 10px !important;'><b>{{package.strPackageName}}</b>
                                                    <p>{{package.dblPackagePrice | currency:"P"}}</p></h5>
                                            </div>
                                            <div class="card-reveal">

                                   <span class="card-title grey-text text-darken-4"><i
                                           class="material-icons right" id="packClose{{package.intPackageID}}">close</i></span>
                                                <h4 style='font-size: 12px; line-height: 15px !important;'>
                                                    <b>{{package.strPackageName}}</b><br/>
                                                    <span class="grey-text text-darken-4">{{package.dblPackagePrice | currency:"Php "}}</span>
                                                </h4>
                                                <div class="input-field col s12">
                                                    <input type="number" id="crPSQty{{package.intPackageID}}"
                                                           ng-model="vm.quantity"/>
                                                    <label for="crPSQty{{package.intPackageID}}"><b>Quantity</b></label>
                                                </div>
                                                <h6 class="grey-text text-darken-4">{{package.dblPackagePrice *
                                                    vm.quantity | currency: "Php "}}</h6>

                                                <a class="waves-effect waves-light btn"
                                                   ng-click="vm.addToCart($index, vm.selected); vm.sumTotal(); vm.closePackage(package.intPackageID);">
                                                    <i class="material-icons left"
                                                       style="padding: 0px !important; margin: 0px !important;">
                                                        shopping_basket</i>GET PACKAGE
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div ng-show="vm.selected == 'promo'">
                                <div class="row ">
                                    <div class="col s2" ng-repeat="promo in vm.promoList | filter: searchReservationItem">
                                        <div class="card small">
                                            <div class="card-image waves-effect waves-block waves-light">
                                                <img class="activator" ng-src="{{service.strPhotoPath}}">
                                            </div>
                                            <div class="card-content">
                                                <a class="activator grey-text text-darken-4 light btn btn-small center"
                                                   style="margin-top: -10px;"><i
                                                        class="material-icons right white-text">add_shopping_cart</i></a>
                                                <h5 style='font-size: 12px; line-height: 10px !important;'><b>{{promo.strPromoName}}</b>
                                                    <p>{{promo.dblPromoPrice | currency:"P"}}</p></h5>
                                            </div>
                                            <div class="card-reveal">

                                   <span class="card-title grey-text text-darken-4"><i
                                           class="material-icons right" id="promoClose{{promo.intPromoID}}">close</i></span>
                                                <h4 style='font-size: 12px; line-height: 15px !important;'>
                                                    <b>{{promo.strPromoName}}</b><br/>
                                                    <span class="grey-text text-darken-4">{{promo.dblPromoPrice | currency:"Php "}}</span>
                                                </h4>
                                                <div class="input-field col s12">
                                                    <input type="number" id="crPSQty{{promo.intPromoID}}"
                                                           ng-model="vm.quantity"/>
                                                    <label for="crPSQty{{promo.intPromoID}}"><b>Quantity</b></label>
                                                </div>
                                                <h6 class="grey-text text-darken-4">{{promo.dblPromoPrice * vm.quantity | currency: "Php "}}</h6>

                                                <a class="waves-effect waves-light btn"
                                                   ng-click="vm.addToCart($index, vm.selected); vm.sumTotal(); vm.closePromo(promo.intPromoID);">
                                                    <i class="material-icons left"
                                                       style="padding: 0px !important; margin: 0px !important;">
                                                        shopping_basket</i>GET PROMO
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col s12 z-depth-barts white" id="">
                                <h6 class="center" style="padding-top: -2px !important;"><b>Selected Items</b></h6>
                                <div class="col s12" id="pslist"
                                     style="margin-top: -13px !important; margin-bottom: 5px !important;">
                                    <div class="chip" ng-repeat="product in vm.productOrder" style="margin: 2px;"
                                                      ng-if="product.productTotal > 0" ng-click="vm.editQtyProd($index, product);">
                                        <img ng-src="{{product.photo}}" alt="img">
                                        {{product.product | uppercase }} ({{product.productQuantity}} - {{product.productTotal | currency: "Php "}})
                                        <i class="material-icons" ng-click="vm.removeSelProd($index, product);">clear</i>
                                    </div>
                                    <div class="chip" ng-repeat="service in vm.serviceOrder" style="margin: 2px;"
                                         ng-if="service.serviceTotal > 0"
                                         ng-click="vm.editQtyServ($index, service);">
                                        <img ng-src="{{service.photo}}" alt="img">
                                        {{service.service | uppercase }} ({{service.serviceQuantity}} - {{service.serviceTotal | currency: "Php "}})
                                        <i class="material-icons" ng-click="vm.removeSelServ($index, service);">clear</i>
                                    </div>
                                    <div class="chip" ng-repeat="package in vm.packageOrder" style="margin: 2px;"
                                         ng-if="package.packageTotal > 0"
                                         ng-click="vm.editQtyPackage($index, package);">
                                        {{package.package | uppercase }} ({{package.packageQuantity}} - {{package.packageTotal | currency: "Php "}})
                                        <i class="material-icons" ng-click="vm.removeSelPackage($index, package);">clear</i>
                                    </div>
                                    <div class="chip" ng-repeat="promo in vm.promoOrder" style="margin: 2px;"
                                         ng-if="promo.promoQuantity > 0"
                                         ng-click="vm.editQtyPromo($index, promo);">
                                        {{promo.promo | uppercase }} ({{promo.promoQuantity}} - {{promo.promoTotal | currency: "Php "}})
                                        <i class="material-icons" ng-click="vm.removeSelPromo($index, promo);">clear</i>
                                    </div>
                                </div>
                            </div>
                            <div class="col s4" style="margin-top: 10px;">
                                <div class="input-field col s12">
                                    <select multiple ng-model="vm.extraCharge" id="crROtherCharge"
                                            ng-options="charge.strECName for charge in vm.extraChargeList">
                                        <option value="" disabled selected>Choose...</option>
                                    </select>
                                    <label for="crROtherCharge"><b>Other Charges</b></label>
                                </div>
                            </div>
                            <div class="col s4" style="margin-top: 10px;">
                                <div class="input-field col s12">
                                    <select ng-model="vm.selDiscounts" id="crRDiscount"
                                            ng-options="discount.strDiscountName for discount in vm.discountList">
                                        <option value="" disabled selected>Choose...</option>
                                    </select>
                                    <label for="crRDiscount"><b>Discounts</b></label>
                                </div>
                            </div>
                            <div class="col s4 z-depth-barts white" style="margin-top: 10px;">
                                <div class="col s12">
                                    <div class="input-field col s12">
                                        <h5 class="green-text">Total: {{vm.sum | currency: "Php"}}</h5>
                                    </div>

                                </div>
                            </div>
                            <div class="col s4" style="margin-top: 10px;">
                                <div class="input-field col s12">
                                    <select multiple ng-model="vm.selEmployees" id="cREmp"
                                            ng-options="employee.strEmpFirstName for employee in vm.employeeList">
                                        <option value="" disabled selected>Choose...</option>
                                    </select>
                                    <label for="cREmp"><b>Employee</b>
                                        <i class="material-icons red-text tiny">error_outline</i>
                                    </label>
                                </div>
                            </div>
                            <div class="col s4" style="margin-top: 10px;" ng-if="vm.details.reservationType.type == 'Event'">
                                <div class="input-field col s12">
                                    <select ng-model="vm.resPaymentType" id="crPType" material-select watch>
                                        <option value="" disabled selected>Choose...</option>
                                        <option value="FULL PAYMENT">FULL PAYMENT</option>
                                        <option value="HALF PAYMENT">HALF PAYMENT</option>
                                    </select>
                                    <label for="cREmp"><b>Payment Type</b>
                                        <i class="material-icons red-text tiny">error_outline</i>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="stepreservation well" ng-hide="vm.details.reservationType.id == 1">
                        <div class="row" ng-show="vm.details.reservationType.id != 2">
                        </div>
                        <div ng-show="vm.details.reservationType.id == 2">
                            <div class="row">
                                <h3 class="center"><b>Summary</b></h3>
                                <h5><b>Customer Details</b></h5>
                                <div class="input-field col s12" id="crRSumCustName">
                                    <input type="text" readonly ng-model="vm.details.name"/>
                                    <label for="crRSumCustName" class=><b>Customer Name</b></label>
                                </div>
                                <div class="input-field col s12" style="margin-top: 15px;">
                                    <input type="text" readonly id="crRSumAddress" ng-model="vm.details.address"/>
                                    <label for="crRSumAddress"><b>Address</b></label>
                                </div>
                                <div class="input-field col s6">
                                    <input type="text" readonly id="crRSumContact" ng-model="vm.details.contact"/>
                                    <label for="crRSumContact"><b>Contact</b></label>
                                </div>
                                <div class="input-field col s6" style="margin-top: 15px;">
                                    <input type="email" readonly id="crRSumEmail" ng-model="vm.details.email"/>
                                    <label for="crRSumEmail" class="active"><b>Email</b></label>
                                </div>
                                <div class="input-field col s6">
                                    <input type="text" name="" id="crRSumCustType"/>
                                    <label for="crRSumCustType"><b>Customer Type</b></label>
                                </div>
                            </div>
                            <div class="row">
                                <h5><b>Reservation Details</b></h5>
                                <div class="input-field col s12">
                                    <input type="text" class="validate" id="crRSumEventVenue"
                                           name=""/>
                                    <label for="crRSumEventVenue"><b>Event Venue</b></label>
                                </div>
                                <div class="input-field col s6" style="margin-top: 15px;">
                                    <input type="text" id="crRSumFromDate" name=""/>
                                    <label for="crRSumFromDate"><b>From (Date)</b></label>
                                </div>
                                <div class="input-field col s6" style="margin-top: 15px;">
                                    <input type="text" id="crRSumToDate" name=""/>
                                    <label for="crRSumToDate" class="active"><b>To (Date)</b></label>
                                </div>
                                <div class="input-field col s12">
                                    <label for="timepicker">Time</label>
                                    <input id="timepicker" class="timepicker" type="time">
                                </div>
                                <div class="input-field col s6" style="margin-top: 15px;">
                                    <input type="text" name="" id="crRSumToTime"/>
                                    <label for="crRSumToTime" class="active"><b>To (Time)</b></label>
                                </div>

                                <div class="input-field col s6">
                                    <input type="number" name="" id="crRSumHeadCount"/>
                                    <label for="crRSumHeadCount"><b>Head Count</b></label>
                                </div>
                            </div>
                            <div class="row">
                                <h5><b>Selected Items</b></h5>
                                <div class="col s12">
                                    <h6 class="grey-text text-darken-3"><b>Services</b></h6>
                                    <table>
                                        <thead>
                                        <tr>
                                            <th class="left-align grey-text text-darken-3">Service Name</th>
                                            <th class="right-align grey-text text-darken-3">Price</th>
                                            <th class="right-align grey-text text-darken-3">Quantity</th>
                                        </tr>
                                        </thead>
                                    </table>
                                </div>
                                <div class="col s12">
                                    <h6 class="grey-text text-darken-3"><b>Products</b></h6>
                                    <table>
                                        <thead>
                                        <tr>
                                            <th class="left-align grey-text text-darken-3">Product Name</th>
                                            <th class="right-align grey-text text-darken-3">Price</th>
                                            <th class="right-align grey-text text-darken-3">Quantity</th>
                                        </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                            <div class="row">
                                <h5><b>Other Charges</b></h5>
                                <div class="col s12">
                                    <table>
                                        <thead>
                                        <tr>
                                            <th class="grey-text text-darken-3">Charge Name</th>
                                            <th class="grey-text text-darken-3">Price</th>
                                        </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                            <div class="row">
                                <h5 class="grey-text text-darken-3"><b>Discounts</b></h5>
                                <div class="col s12">
                                    <table>
                                        <thead>
                                        <tr>
                                            <th class="grey-text text-darken-3">Discount Name</th>
                                            <th class="grey-text text-darken-3">Price</th>
                                        </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12">
                                    <table>
                                        <thead>
                                        <tr>
                                            <th class="left-align"><b>Payment Type</b></th>
                                            <th class="right-align"><b>Total Price</b></th>
                                        </tr>
                                        </thead>
                                    </table>
                                    <p class="red-text">
                                        Note: First payment should be settled right after the reservation is created.
                                        Second payment will be collected on the day of the event after the program.
                                    </p>

                                    <p>
                                        By clicking create, you AGREE to our terms and agreements stated in the
                                        <a class="blue-text" href="">Reservation Contract</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="red-text btn-flat transparent left" disabled
                        style="margin:0px !important; padding:0px !important;"><i
                        class="material-icons">error_outline</i>&nbspRequired field
                </button>
                <button type="button" id="nextbtn" ng-disabled="createReservationForm.$invalid"
                        class="actionreserve nextformreserve waves-effect waves-light white-text btn-flat purple"
                        style="margin-left: 3px; margin-right:3px;">NEXT
                </button>
                <button type="submit" value="submit" id="createReservationSubmitForm"
                        class="actionreserve submitformreserve waves-effect waves-light white-text btn-flat purple"
                        style="margin-left:3px; margin-right:3px;"
                        ng-click="vm.saveReservation(vm.details)">CREATE
                </button>
                <button type="button" id="backbtn"
                        class="actionreserve backformreserve waves-effect waves-purple transparent btn-flat"
                        style="margin-left: 3px;margin-right:3px;">BACK
                </button>

            </div>
        </form>


    </div>

    <div id="editItem" class="modal modal-fixed-footer" style="width: 400px !important; height: 500px !important;">
        <div class="modal-content">
            <h4 class="center">{{vm.itemToBeEdit.itemName}}<br/>
                <img class="circle z-depth-1" ng-src="{{vm.itemToBeEdit.itemPhoto}}" height="150" width="150"></h4>
            <h6 class="center">Price: {{vm.itemToBeEdit.itemPrice | currency: "Php "}}</h6>
            <div class="container">
                <div class="row">
                    <div class="input-field col s4 offset-s4" style="margin-top: -20px !important;">
                        <input type="number" class="center-align" ng-model="vm.itemToBeEdit.itemQuantity">
                    </div>
                    <div class="input-field col s12" style="margin-top: -10px !important;">
                        <h5 class="center">Total: {{ (vm.itemToBeEdit.itemPrice * vm.itemToBeEdit.itemQuantity) | currency: "Php "}}</h5>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="waves-effect waves-light btn-flat purple white-text"
                    ng-click="vm.editSelectedItem(vm.itemToBeEdit);">
                SAVE
            </button>
        </div>
    </div>
</div>

<script type="text/javascript">
    (function() {
        $('select').material_select('destroy');
    })();
</script>
